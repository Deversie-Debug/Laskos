<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Virtual Statue Phone Call Demo</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@900&display=swap" rel="stylesheet">
<style>
html, body {
  margin:0; padding:0;
  width:100vw; height:100vh;
  overflow:hidden;
  font-family: Arial, sans-serif;
  background: #e6f0ff;
  display:flex; justify-content:center; align-items:center;
}

/* Preloader */
#preloader {
  position: fixed;
  top:0; left:0;
  width:100vw; height:100vh;
  background: rgba(0,0,0,0.35);
  display:flex; justify-content:center; align-items:center;
  flex-direction: column;
  z-index:9999;
  padding:20px;
  box-sizing:border-box;
  opacity:1;
  transform: translateY(0);
  transition: opacity 1s ease, transform 1s ease;
}
#preloader.fade-out {
  opacity:0;
  transform: translateY(-40px);
}
#preloader.fade-in {
  opacity:1;
  transform: translateY(0);
}

/* Preloader text */
.preloader-text { 
  font-family: 'Playfair Display', serif;
  font-weight:900;
  font-size: clamp(30px,10vw,100px);
  color:#fff;
  text-align:center;
  text-shadow:0 0 8px rgba(255,255,255,0.6),0 0 12px rgba(255,255,255,0.3);
  display:flex; justify-content:center; flex-wrap: nowrap;
  margin:5px 0;
}

.preloader-text span { 
  display:inline-block; 
  opacity:0; 
  transform:translateY(20px); 
  animation: appear 0.35s forwards; 
  margin:0 2px; 
}

.preloader-logo { 
  width:clamp(40px,10vw,80px); 
  margin:10px 0; 
  opacity:0; 
  transform:translateY(20px); 
  animation:appear 0.35s forwards; 
}

@keyframes appear { to { opacity:1; transform: translateY(0); } }

/* Flags lower */
.flags-container { 
  display:flex; gap:20px; 
  margin-top:auto;
  margin-bottom:50px;
  opacity:0;
  transform: translateY(20px);
  transition: opacity 0.8s ease, transform 0.8s ease;
}
.flags-container.show {
  opacity:1;
  transform: translateY(0);
}
.flag { 
  width:60px; height:40px; 
  cursor:pointer; 
  border-radius:5px; 
  border:2px solid transparent; 
  transition: transform 0.2s, border 0.2s; 
}
.flag:hover { transform: scale(1.1); border:2px solid #0077cc; }

/* Screens */
.screen {
  display:flex; 
  flex-direction: column; 
  align-items: center;
  text-align:center; 
  width:100vw; 
  height:100vh; 
  box-sizing:border-box;
  position:absolute;
  top:0; left:0;
  opacity:0;
  pointer-events:none;
  transition: opacity 0.8s ease;
  background: rgba(0,0,0,0.35); /* same as preloader */
}
.screen.active {
  opacity:1;
  pointer-events:auto;
}

/* Titles higher */
.screen h1, .screen p {
  margin-top:40px;
  margin-bottom:20px;
  color:white;
}

/* Statue centered */
.statue-container { 
  position: relative; 
  display:flex; justify-content:center; align-items:center; 
  width:30vw; height:30vw; 
  max-width:300px; max-height:300px; 
  margin:auto 0; /* centers vertically */
}
.statue-img { width:100%; height:100%; border-radius:50%; z-index:2; }

/* Buttons lower */
.buttons { 
  display:flex; 
  justify-content:center; 
  margin-top:auto; 
  margin-bottom:40px; 
}
button { 
  padding:15px 25px; 
  border-radius:50px; 
  border:none; 
  color:white; 
  font-weight:bold; 
  font-size:18px; 
  cursor:pointer; 
  margin:10px; 
  min-width:120px; 
}
.answer { background-color:#28a745; }
.decline { background-color:#dc3545; }
.end-call { background-color:#ff9933; min-width:180px; }

/* Animations */
.incoming-call .statue-img { animation: bounce 1s infinite; box-shadow:0 0 15px #0077cc; }
.talking { animation: talk 0.6s infinite alternate; }

@keyframes bounce { 0%,100%{transform:translateY(0);} 50%{transform:translateY(-10px);} }
@keyframes talk { 0%{transform:scale(1);} 50%{transform:scale(1.03);} 100%{transform:scale(1);} }

@media(max-width:500px){
  .statue-container { width:40vw; height:40vw; }
  .statue-img { width:100%; height:100%; }
  .flag { width:45px; height:30px; }
}
</style>
</head>
<body>

<!-- Preloader -->
<div id="preloader">
  <div class="preloader-text" id="preloaderTop"></div>
  <img src="https://raw.githubusercontent.com/Deversie-Debug/Laskos/main/Logo.png" class="preloader-logo" id="preloaderLogo">
  <div class="preloader-text" id="preloaderBottom"></div>
  <div class="flags-container">
    <img src="https://upload.wikimedia.org/wikipedia/commons/2/2d/Animated-Flag-United-Kingdom.gif" class="flag" data-lang="en" alt="English">
    <img src="https://upload.wikimedia.org/wikipedia/commons/e/eb/Animated-Flag-Greece.gif" class="flag" data-lang="gr" alt="Greek">
  </div>
</div>

<!-- Incoming Call -->
<div class="screen" id="incomingCall">
  <h1>Incoming Call</h1>
  <p id="callName">Vasilis Laskos / Βασίλης Λάσκος</p>
  <div class="statue-container incoming-call">
    <img src="https://raw.githubusercontent.com/Deversie-Debug/Laskos/main/LaskosGR.jpg" alt="Statue" class="statue-img" id="incomingStatue">
  </div>
  <div class="buttons">
    <button class="answer" id="answerBtn">Answer</button>
    <button class="decline" id="declineBtn">Decline</button>
  </div>
</div>

<!-- Active Call -->
<div class="screen" id="activeCall">
  <h1>Call with Statue</h1>
  <div class="statue-container" id="activeStatueContainer">
    <img src="https://raw.githubusercontent.com/Deversie-Debug/Laskos/main/LaskosGR.jpg" alt="Statue" class="statue-img" id="activeStatue">
  </div>
  <div class="buttons">
    <button class="end-call" id="endCallBtn">End Call</button>
  </div>
</div>

<!-- Audio -->
<audio id="audio" src="https://raw.githubusercontent.com/Deversie-Debug/Laskos/main/LaskosGR.mp3"></audio>

<script>
// Animate letters individually
function animateLetters(text, containerId, delayStart){
  const container = document.getElementById(containerId);
  container.textContent = '';
  for(let i=0;i<text.length;i++){
    const span = document.createElement('span');
    span.textContent = text[i];
    span.style.animationDelay = `${delayStart + i*0.15}s`;
    container.appendChild(span);
  }
}

// Animate text + logo
animateLetters('LIVING','preloaderTop',0);
const logo = document.getElementById('preloaderLogo');
logo.style.animation = 'appear 0.35s forwards';
logo.style.animationDelay = '1s';
animateLetters('STATUES','preloaderBottom',1.5);

// Show flags after animation
setTimeout(()=>{
  document.querySelector('.flags-container').classList.add('show');
}, 3000);

// Flags → crossfade into call
const flags=document.querySelectorAll('.flag');
const preloader=document.getElementById('preloader');
const incomingCall=document.getElementById('incomingCall');
let selectedLanguage='en';

flags.forEach(flag=>{
  flag.addEventListener('click',()=>{
    selectedLanguage=flag.dataset.lang;

    // Crossfade: preloader fades out, call fades in
    preloader.classList.add('fade-out');
    incomingCall.classList.add('active');

    preloader.addEventListener('transitionend', ()=>{
      preloader.style.display='none';
    }, { once:true });
  });
});

// Active call controls
const activeCall=document.getElementById('activeCall');
const answerBtn=document.getElementById('answerBtn');
const declineBtn=document.getElementById('declineBtn');
const endCallBtn=document.getElementById('endCallBtn');
const audio=document.getElementById('audio');
const activeStatue=document.getElementById('activeStatue');

// Answer call
answerBtn.addEventListener('click',()=>{
    incomingCall.classList.remove('active');
    activeCall.classList.add('active');
    audio.currentTime=0;
    audio.play();
    activeStatue.classList.add('talking');
});

// Decline call → back to preloader smooth
declineBtn.addEventListener('click',()=>{
    audio.pause(); audio.currentTime=0;
    incomingCall.classList.remove('active');
    preloader.style.display='flex';
    requestAnimationFrame(()=>{
      preloader.classList.remove('fade-out');
      preloader.classList.add('fade-in');
    });
    activeStatue.classList.remove('talking');
});

// End call → back to preloader smooth
endCallBtn.addEventListener('click',()=>{
    audio.pause(); audio.currentTime=0;
    activeCall.classList.remove('active');
    preloader.style.display='flex';
    requestAnimationFrame(()=>{
      preloader.classList.remove('fade-out');
      preloader.classList.add('fade-in');
    });
    activeStatue.classList.remove('talking');
});

// Stop talking animation when audio ends
audio.addEventListener('ended',()=>{
    activeStatue.classList.remove('talking');
});
</script>
</body>
</html>
